# Notes Remover

ä½¿ç”¨ `AST` å’Œ `tokenize` é‡æ„çš„æ–°ç‰ˆ **æ³¨é‡Šåˆ é™¤å™¨** ï¼šç»Ÿè®¡æˆ–åˆ é™¤ Py æ³¨é‡Šï¼ˆæ–‡æ¡£å­—ç¬¦ä¸²ï¼›å•è¡Œï¼›å¤šè¡Œï¼›è¡Œå†…ç­‰ï¼‰ï¼Œæ”¯æŒå•ä¸ªæ–‡ä»¶ï¼Œå’Œæ–‡ä»¶å¤¹ã€‚ç”¨äºä¾› AI é‡æ–°ç”Ÿæˆæ³¨é‡Šã€ç¿»è¯‘æ³¨é‡Šï¼Œæˆ–è€…å•çº¯å‡å°‘ä»£ç é‡ã€‚


## ğŸ˜ åŠŸèƒ½ç‰¹æ€§

### æ³¨é‡Šåˆ†æ
- ç»Ÿè®¡å•ä¸ª Python æ–‡ä»¶æˆ–æ•´ä¸ªç›®å½•ä¸­æ‰€æœ‰ Python æ–‡ä»¶çš„æ³¨é‡Šä¿¡æ¯
- æä¾›è¯¦ç»†çš„æ³¨é‡Šåˆ†ææŠ¥å‘Šï¼ŒåŒ…æ‹¬ï¼š
  - æ³¨é‡Šè¡Œæ•°å’Œæ€»è¡Œæ•°
  - æ³¨é‡Šå­—ç¬¦æ•°å’Œæ€»å­—ç¬¦æ•°
  - æ³¨é‡Šå æ¯”ç»Ÿè®¡
  - å…·ä½“çš„æ³¨é‡Šå†…å®¹å’Œä½ç½®

### æ³¨é‡Šç§»é™¤
- å®‰å…¨ç§»é™¤ Python æ–‡ä»¶ä¸­çš„æ³¨é‡Šå†…å®¹
- è‡ªåŠ¨åˆ›å»ºå¤‡ä»½æ–‡ä»¶ï¼ˆ`.py.bak`ï¼‰
- æ”¯æŒå•è¡Œæ³¨é‡Šï¼ˆ`#`ï¼‰å’Œå¤šè¡Œå­—ç¬¦ä¸²æ³¨é‡Šï¼ˆ`'''`ã€`"""`ï¼‰
- æ™ºèƒ½è¯†åˆ«å¹¶ä¿ç•™æ–‡æ¡£å­—ç¬¦ä¸²

## â— æ³¨æ„äº‹é¡¹

1. **å¤‡ä»½æœºåˆ¶**ï¼šç§»é™¤æ³¨é‡Šæ—¶ä¼šè‡ªåŠ¨åˆ›å»º `.py.bak` å¤‡ä»½æ–‡ä»¶
2. **å®‰å…¨æ“ä½œ**ï¼šå»ºè®®åœ¨ `Git` ç‰ˆæœ¬æ§åˆ¶ç¯å¢ƒä¸‹ä½¿ç”¨ç§»é™¤åŠŸèƒ½
3. **ç¼–ç æ”¯æŒ**ï¼šä»…æ”¯æŒ `UTF-8` ç¼–ç çš„ Python æ–‡ä»¶
4. **åç»­æ“ä½œ**ï¼š
    4.1 ç§»é™¤æ³¨é‡Šåè‡ªè¡Œ `diff` å·®å¼‚
    4.2 å¹¶æ£€æŸ¥åŠŸèƒ½æ˜¯å¦æ­£å¸¸è¿è¡Œ
    4.3 å»ºè®®ä½¿ç”¨ `ruff` ç§»é™¤å¤šä½™ç©ºè¡Œ
    > ```powershell
    > ruff check --fix --select E301,E302,E303,E304,E305,E306 --preview .\tests\examples\
    > ```

---

## ğŸ–ï¸ ä½¿ç”¨æ–¹æ³•

### ç»Ÿè®¡æ³¨é‡Š

### æ— å‚æ•°è°ƒç”¨ï¼Œæˆ–ä½¿ç”¨ -c --count_notes å‚æ•°è°ƒç”¨ï¼Œæ‰§è¡Œç»Ÿè®¡æ³¨é‡ŠåŠŸèƒ½

Single .py file

```powershell
python .\Notes_Remover.py .\tests\examples\example.py
```

```powershell
python .\Notes_Remover.py -c .\tests\examples\example.py
```

```powershell
python .\Notes_Remover.py --count_notes .\tests\examples\example.py
```

Folder

```powershell
python .\Notes_Remover.py .\tests\examples\
```

è¿è¡Œç»“æœ

```cmd

================================================================================
æ–‡ä»¶åï¼šexample.py
æ³¨é‡Šä¿¡æ¯ï¼š
--------------------------------------------------------------------------------
è¡Œå·    æ³¨é‡Šå†…å®¹
1       #!/usr/bin/env python3
2       # -*- coding: utf-8 -*-
<...>
268     # æ–‡ä»¶ç»“æŸæ³¨é‡Š
--------------------------------------------------------------------------------
æ³¨é‡Šè¡Œæ•°ï¼š      171             æ€»è¡Œæ•°ï¼š        271             æ³¨é‡Šå æ¯”ï¼š      63%
æ³¨é‡Šå­—æ¯æ•°ï¼š    1583            æ€»å­—æ¯æ•°ï¼š      4535            æ³¨é‡Šå­—æ¯å æ¯”ï¼š  35%
================================================================================
æ–‡ä»¶åï¼šexample2.py
æ³¨é‡Šä¿¡æ¯ï¼š
--------------------------------------------------------------------------------
è¡Œå·    æ³¨é‡Šå†…å®¹
1       """1"""
3       # 2
4       # 3
--------------------------------------------------------------------------------
æ³¨é‡Šè¡Œæ•°ï¼š      3               æ€»è¡Œæ•°ï¼š        5               æ³¨é‡Šå æ¯”ï¼š      60%
æ³¨é‡Šå­—æ¯æ•°ï¼š    13              æ€»å­—æ¯æ•°ï¼š      23              æ³¨é‡Šå­—æ¯å æ¯”ï¼š  57%
================================================================================

```

### ç§»é™¤æ³¨é‡Š

### ä½¿ç”¨ -r --remove_notes å‚æ•°è°ƒç”¨ï¼Œæ‰§è¡Œåˆ é™¤æ³¨é‡ŠåŠŸèƒ½

Single .py file

```powershell
python .\Notes_Remover.py -r .\tests\examples\example2.py
```

```powershell
python .\Notes_Remover.py --remove_notes .\tests\examples\example2.py
```

Folder

```powershell
python .\Notes_Remover.py -r .\tests\examples\
```

```powershell
python .\Notes_Remover.py --remove_notes .\tests\examples\
```

è¿è¡Œç»“æœ

![alt text](assets/test_remove.gif)

## ğŸ¤” æ ¸å¿ƒæ¨¡å—è¯´æ˜

### BasePyFileProcessor
- åŸºç¡€æ–‡ä»¶å¤„ç†å™¨æŠ½è±¡ç±»
- æä¾›æ–‡ä»¶è¯»å–ã€è¯æ³•åˆ†æã€å­—ç¬¦ä¸²è¯†åˆ«ç­‰é€šç”¨åŠŸèƒ½

### PyFileNotesAnalyzer
- æ³¨é‡Šåˆ†æå™¨
- ä½¿ç”¨ tokenize æ¨¡å—è¿›è¡Œç²¾ç¡®çš„æ³¨é‡Šè¯†åˆ«
- æ”¯æŒå•è¡Œæ³¨é‡Šå’Œå¤šè¡Œå­—ç¬¦ä¸²æ³¨é‡Šçš„ç»Ÿè®¡

### PyFileNotesRemover
- æ³¨é‡Šç§»é™¤å™¨
- æ™ºèƒ½è¯†åˆ«å¹¶ç§»é™¤æ³¨é‡Šï¼Œä¿ç•™ä»£ç ç»“æ„
- è‡ªåŠ¨åˆ›å»ºå¤‡ä»½æ–‡ä»¶ç¡®ä¿å®‰å…¨

## ğŸ¤“ ç¼–ç¨‹æ–¹å¼ä½¿ç”¨

#### åˆ†æå•ä¸ªæ–‡ä»¶
```python
from src.utils.single_py_file_handler import PyFileNotesAnalyzer

analyzer = PyFileNotesAnalyzer(Path("your_file.py"))
analyzer.print_details()  # æ‰“å°åˆ†æç»“æœ
json_data = analyzer.get_details_json()  # è·å–JSONæ ¼å¼æ•°æ®
```

#### åˆ†æç›®å½•
```python
from src.utils.count_files_notes import CountFilesNotes

counter = CountFilesNotes(Path("your_directory"))
counter.print_notes_details()  # æ‰“å°æ‰€æœ‰æ–‡ä»¶çš„åˆ†æç»“æœ
```

#### ç§»é™¤æ³¨é‡Š
```python
from src.utils.single_py_file_handler import PyFileNotesRemover

# ç§»é™¤å•ä¸ªæ–‡ä»¶æ³¨é‡Š
remover = PyFileNotesRemover(Path("your_file.py"))

# ç§»é™¤ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶æ³¨é‡Š
from src.utils.remove_files_notes import RemoveFilesNotes
remover = RemoveFilesNotes(Path("your_directory"))
```
